---
description: author:huahua
---

# ğŸ˜˜ ipå‘½ä»¤å¥½ç”¨æ

ä¸ä¼šæœ‰äººè¿˜åœ¨ifconfigå§ğŸ˜Š

## ip å‘½ä»¤

```sh
ip [ OPTIONS ] OBJECT { COMMAND | help }
```

å¸¸ç”¨å¯¹è±¡çš„å–å€¼å«ä¹‰å¦‚ä¸‹ï¼š

* linkï¼šç½‘ç»œè®¾å¤‡
* addressï¼šè®¾å¤‡ä¸Šçš„åè®®ï¼ˆIPæˆ–IPv6ï¼‰åœ°å€
* addrlabelï¼šåè®®åœ°å€é€‰æ‹©çš„æ ‡ç­¾é…ç½®
* routeï¼šè·¯ç”±è¡¨æ¡ç›® (å¸¸ç”¨ï¼Œä½œä¸ºè·¯ç”±èµ°å‘é…ç½®)
* ruleï¼šè·¯ç”±ç­–ç•¥æ•°æ®åº“ä¸­çš„è§„åˆ™(æŸ¥çœ‹tableï¼Œè¿™ä¸ªè¡¨å†³å®šäº†routeåº”è¯¥é…åœ¨å“ªshell)

OPTIONS ä¸ºå¸¸ç”¨é€‰é¡¹ï¼Œå€¼å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ï¼š

```sh
OPTIONS={ -V[ersion] | -s[tatistics] | -d[etails] | -r[esolve] | -h[uman-readable] | -iec | -f[amily] { inet | inet6 | ipx | dnet | link } | -o[neline] | -t[imestamp] | -b[atch] [filename] | -rc[vbuf] [size] }
```

å¸¸ç”¨é€‰é¡¹çš„å–å€¼å«ä¹‰å¦‚ä¸‹ï¼š

* \-Vï¼šæ˜¾ç¤ºå‘½ä»¤çš„ç‰ˆæœ¬ä¿¡æ¯ï¼›
* \-sï¼šè¾“å‡ºæ›´è¯¦ç»†çš„ä¿¡æ¯ï¼›
* \-fï¼šå¼ºåˆ¶ä½¿ç”¨æŒ‡å®šçš„åè®®æ—ï¼›
* \-4ï¼šæŒ‡å®šä½¿ç”¨çš„ç½‘ç»œå±‚åè®®æ˜¯IPv4åè®®ï¼›
* \-6ï¼šæŒ‡å®šä½¿ç”¨çš„ç½‘ç»œå±‚åè®®æ˜¯IPv6åè®®ï¼›
* \-0ï¼šè¾“å‡ºä¿¡æ¯æ¯æ¡è®°å½•è¾“å‡ºä¸€è¡Œï¼Œå³ä½¿å†…å®¹è¾ƒå¤šä¹Ÿä¸æ¢è¡Œæ˜¾ç¤ºï¼›
* \-rï¼šæ˜¾ç¤ºä¸»æœºæ—¶ï¼Œä¸ä½¿ç”¨IPåœ°å€ï¼Œè€Œä½¿ç”¨ä¸»æœºçš„åŸŸåã€‚
* help ä¸ºè¯¥å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ã€‚

### ä¾‹å­ğŸŒ°

{% code lineNumbers="true" %}
```
æ¯”å¦‚ap(192.168.2.1)åšäº†wlanéš”ç¦»ï¼Œæˆ‘è¿ä¸Šçƒ­ç‚¹å(åˆ†é…åœ°å€192.168.2.99)
è®¿é—®ä¸äº†ä¸€ä¸ªç›®æ ‡æœº(192.168.2.44)ï¼Œæ€ä¹ˆè®©ä»–è®¿é—®ï¼Ÿ

åœ¨apä¸Šï¼Œæˆ–è€…è¿‡æµé‡çš„è®¾å¤‡ä¸Š
ip route add 192.168.2.44 via 192.168.2.99 dev eth0
æ·»åŠ ä¸€æ¡é™æ€è·¯ç”±æŒ‡å®šä¸‹ä¸€è·³åœ°å€(via),devæŒ‡å®šç½‘å¡
åˆ é™¤çš„è¯addæ¢æˆdel


ä¸‹è¾¹æƒ…å†µæ¥è‡ªç½‘ç»œ
ip link show                     # æ˜¾ç¤ºç½‘ç»œæ¥å£ä¿¡æ¯
ip link set eth0 up              # å¼€å¯ç½‘å¡ï¼ˆè¿™ä¸æ¯”ifconfig upé¦™ï¼Ÿï¼‰
ip link set eth0 down            # å…³é—­ç½‘å¡
ip link set eth0 promisc on      # å¼€å¯ç½‘å¡çš„æ··åˆæ¨¡å¼
ip link set eth0 promisc offi    # å…³é—­ç½‘å¡çš„æ··ä¸ªæ¨¡å¼
ip link set eth0 txqueuelen 1200 # è®¾ç½®ç½‘å¡é˜Ÿåˆ—é•¿åº¦
ip link set eth0 mtu 1400        # è®¾ç½®ç½‘å¡æœ€å¤§ä¼ è¾“å•å…ƒ
ip addr show                     # æ˜¾ç¤ºç½‘å¡IPä¿¡æ¯ï¼ˆæˆ‘å–œæ¬¢ip add showï¼ï¼‰
ip addr add 192.168.0.1/24 dev eth0 # è®¾ç½®eth0ç½‘å¡IPåœ°å€192.168.0.1
ip addr del 192.168.0.1/24 dev eth0 # åˆ é™¤eth0ç½‘å¡IPåœ°å€

ip route show                     # æ˜¾ç¤ºç³»ç»Ÿè·¯ç”±
ip route add default via 192.168.1.254   # è®¾ç½®ç³»ç»Ÿé»˜è®¤è·¯ç”±
ip route list                 # æŸ¥çœ‹è·¯ç”±ä¿¡æ¯ï¼ˆæ ¸å¿ƒè·¯ç”±è¡¨ï¼‰
ip route add 192.168.4.0/24  via  192.168.0.254 dev eth0 # è®¾ç½®192.168.4.0ç½‘æ®µçš„ç½‘å…³ä¸º192.168.0.254,æ•°æ®èµ°eth0æ¥å£
ip route add default via  192.168.0.254  dev eth0        # è®¾ç½®é»˜è®¤ç½‘å…³ä¸º192.168.0.254
ip route del 192.168.4.0/24   # åˆ é™¤192.168.4.0ç½‘æ®µçš„ç½‘å…³
ip route del default          # åˆ é™¤é»˜è®¤è·¯ç”±
ip route delete 192.168.1.0/24 dev eth0 # åˆ é™¤è·¯ç”±
ip link list                   #æ˜¾ç¤ºç½‘ç»œè®¾å¤‡çš„è¿è¡ŒçŠ¶æ€
ip -s link list                #è¯¦ç»†è®¾å¤‡ä¿¡æ¯
ip neigh list                  #é‚»è¡¨
ip link | grep -E '^[0-9]' | awk -F: '{print $2}' #è·å–ä¸»æœºæ‰€æœ‰ç½‘ç»œæ¥å£
```
{% endcode %}

è¿™é‡Œè¦è¡¥å……çš„æ˜¯ï¼Œæœ‰æ—¶å€™è·¯ç”±ä¿¡æ¯ä¸åœ¨defaultè¡¨é‡Œï¼Œæ‰€ä»¥è¦çœ‹ip ruleï¼Œçœ‹æµé‡æ˜¯æ€ä¹ˆèµ°çš„æ





