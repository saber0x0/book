---
description: author:chi
---

# ğŸ§ findå‘½ä»¤å¸¸ç”¨ç”¨æ³•ç¤ºä¾‹

## æœ€åŸºç¡€çš„æ‰“å°æ“ä½œ

findå‘½ä»¤é»˜è®¤æ¥çš„å‘½ä»¤æ˜¯-printï¼Œå®ƒé»˜è®¤ä»¥\nå°†æ‰¾åˆ°çš„æ–‡ä»¶åˆ†éš”ã€‚å¯ä»¥ä½¿ç”¨-print0æ¥ä½¿ç”¨\0åˆ†éš”ï¼Œè¿™æ ·å°±ä¸ä¼šåˆ†è¡Œäº†ã€‚ä½†æ˜¯ä¸€å®šè¦æ³¨æ„ï¼Œ-print0é’ˆå¯¹çš„æ˜¯\nè½¬\0ï¼Œå¦‚æœæŸ¥æ‰¾çš„æ–‡ä»¶åæœ¬èº«å°±å«æœ‰ç©ºæ ¼ï¼Œåˆ™findå-print0ä»ç„¶ä¼šæ˜¾ç¤ºç©ºæ ¼æ–‡ä»¶ã€‚æ‰€ä»¥-print0å®ç°çš„æ˜¯\nè½¬\0çš„æ ‡è®°ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–å·¥å…·å°†\0æ ‡è®°æ›¿æ¢æ‰ï¼Œå¦‚xargsï¼Œtrç­‰ã€‚

```sh
$ mkdir /tmp/a
$ touch /tmp/a/{1..5}.log
$ find /tmp/a   # ç­‰ä»·äºfind /tmp/a -printï¼Œè¡¨ç¤ºæœç´¢/tmp/aç›®å½•
/tmp/a
/tmp/a/4.log
/tmp/a/2.log
/tmp/a/5.log
/tmp/a/1.log
/tmp/a/3.log

$ find /tmp/a -print0    
/tmp/a/tmp/a/4.log/tmp/a/2.log/tmp/a/5.log/tmp/a/1.log/tmp/a/3.log
```

## æ–‡ä»¶åæœç´¢

å¸¸ç”¨çš„ä¸¤ä¸ªæ˜¯-nameå’Œ-pathã€‚

\-nameå¯ä»¥å¯¹æ–‡ä»¶çš„basenameè¿›è¡ŒåŒ¹é…ï¼Œ-pathå¯ä»¥å¯¹æ–‡ä»¶çš„dirname+basenameã€‚æŸ¥æ‰¾çš„æ–‡ä»¶åæœ€å¥½ä½¿ç”¨å¼•å·åŒ…å›´ï¼Œå¯ä»¥é…åˆé€šé…ç¬¦è¿›è¡ŒæŸ¥æ‰¾ã€‚

```bash
$ find /tmp -name "*.log"
/tmp/screen.log
/tmp/x.log
/tmp/timing.log
/tmp/a/4.log
/tmp/a/2.log
/tmp/a/5.log
/tmp/a/1.log
/tmp/a/3.log
/tmp/b.log
```

ä½†ä¸èƒ½åœ¨-nameçš„æ¨¡å¼ä¸­ä½¿ç”¨â€/â€œï¼Œé™¤éæ–‡ä»¶åä¸­åŒ…å«äº†å­—ç¬¦â€/â€œï¼Œå¦åˆ™å°†åŒ¹é…ä¸åˆ°ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸º-nameåªå¯¹basenameè¿›è¡ŒåŒ¹é…ã€‚ä¾‹å¦‚ï¼Œæƒ³è¦åŒ¹é…/tmpç›®å½•ä¸‹æŸåŒ…å«å­—ç¬¦açš„ç›®å½•ä¸‹çš„logæ–‡ä»¶

```bash
$ find /tmp -name '*a*/*.log'
find: warning: Unix filenames usually don't contain 
slashes (though pathnames do). That means that 
'-name â€˜*a*/*.logâ€™' will probably evaluate to false
all the time on this system.  You might find the 
'-wholename' test more useful, or perhaps '-samefile'.
Alternatively, if you are using GNU grep, you could
use 'find ... -print0 | grep -FzZ â€˜*a*/*.logâ€™'.
```

æ‰€ä»¥æƒ³è¦åœ¨æŒ‡å®šç›®å½•ä¸‹æœç´¢æŸç›®å½•ä¸­çš„æŸæ–‡ä»¶ï¼Œåº”è¯¥ä½¿ç”¨-pathè€Œä¸æ˜¯-nameã€‚

```bash
$ find /tmp -path '*a*/*.log'
/tmp/abc/axyz.log
```

æ³¨æ„ï¼Œé…åˆé€šé…ç¬¦\[]æ—¶åº”è¯¥æ³¨æ„æ˜¯åŸºäºå­—ç¬¦é¡ºåºçš„ï¼Œå¤§å°å†™å­—æ¯çš„é¡ºåºæ˜¯a-z â€“> A-Zï¼ŒæŒ‡å®š\[a-z]è¡¨ç¤ºå°å†™å­—æ¯a-zï¼ŒåŒç†\[A-Z]ï¼Œè€Œ\[a-zA-Z]å’Œ\[a-Z]éƒ½è¡¨ç¤ºæ‰€æœ‰å¤§å°å†™å­—æ¯ã€‚å½“ç„¶è¿˜å¯ä»¥æŒ‡å®š\[a-A]è¡¨ç¤ºa-zå¤–åŠ ä¸€ä¸ªAã€‚

å­—æ¯çš„å¤„ç†é¡ºåºè¾ƒå®¹æ˜“ç†è§£ï¼Œå…³äºæ•°å­—çš„å¤„ç†æ–¹æ³•ï¼Œè§ä¸‹é¢çš„ç¤ºä¾‹ã€‚

```bash
$ ls
11.sh  1.sh  22.sh  2.sh  3.sh

$ find -name "[1-2].sh"
./2.sh
./1.sh

$ find -name "[1-23].sh"
./2.sh
./3.sh
./1.sh

$ touch 0.sh
$ find -name "[1-20].sh"
./2.sh
./0.sh
./1.sh

$ find -name "[1-22-3].sh"
./2.sh
./3.sh
./1.sh
```

ä»ä¸Šé¢ç»“æœå¯ä»¥çœ‹å‡ºï¼Œå…¶å®\[]åªèƒ½åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œ\[0-9]è¡¨ç¤º0-9çš„æ•°å­—ï¼Œ\[1-20]è¡¨ç¤º\[1-2]å¤–åŠ ä¸€ä¸ª0ï¼Œ\[1-23]è¡¨ç¤º\[1-2]å¤–åŠ ä¸€ä¸ª3ï¼Œ\[1-22-3]è¡¨ç¤º\[1-2]æˆ–\[2-3]ï¼Œè¿·æƒ‘ç‚¹å°±æ˜¯çœ‹ä¸Šå»æ˜¯å¤§äº10çš„æ•´æ•°ï¼Œå…¶å®æ˜¯ä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„å•ä¸ªæ•°å­—ç»„åˆä½“ã€‚ä¹Ÿå¯ä»¥ç”¨è¿™ç§æ–¹æ³•è¡¨ç¤ºå¤šç§åŒ¹é…ï¼š\[1-2,2-3]ã€‚

## æ ¹æ®æ–‡ä»¶ç±»å‹æœç´¢ï¼š-type

ä¸€èˆ¬éœ€è¦æœç´¢çš„æ–‡ä»¶ç±»å‹å°±åªæœ‰æ™®é€šæ–‡ä»¶(f)ï¼Œç›®å½•(d)ï¼Œé“¾æ¥æ–‡ä»¶(l)ã€‚

ä¾‹å¦‚ï¼Œæœç´¢æ™®é€šæ–‡ä»¶ç±»çš„æ–‡ä»¶ï¼Œä¸”åç§°ä¸ºaå¼€å¤´çš„shæ–‡ä»¶ã€‚

```bash
$ find /tmp -type f -name "a*.sh"

æœç´¢ç›®å½•ç±»æ–‡ä»¶ï¼Œä¸”ç›®å½•åä»¥aå¼€å¤´ã€‚

$ find /tmp -type d -name "a*"
```

## æ ¹æ®æ–‡ä»¶çš„æ—¶é—´æˆ³æœç´¢

æœ€åŸºç¡€çš„æ—¶é—´æˆ³åŒ…æ‹¬ï¼š-atime/-mtime/-ctimeã€‚

> atime(Access Time) -æ–‡ä»¶çš„æœ€è¿‘è®¿é—®æ—¶é—´(catã€vimç­‰) mtime(Modify Time) -æ–‡ä»¶çš„å†…å®¹æœ€è¿‘ä¿®æ”¹çš„æ—¶é—´(vimç¼–è¾‘,é‡å®šå‘å†™å…¥ç­‰) --- é‡ç‚¹æ£€æŸ¥å¯¹è±¡ ctime(Change Time) -æ–‡ä»¶å±æ€§æœ€è¿‘ä¿®æ”¹çš„æ—¶é—´(å†…å®¹ã€è·¯å¾„ã€æ‰€æœ‰è€…ã€æƒé™ç­‰å˜åŒ–)

ä¾‹å¦‚æœç´¢/tmpä¸‹3å¤©å†…ä¿®æ”¹è¿‡å†…å®¹çš„shæ–‡ä»¶ï¼Œå› ä¸ºæ˜¯æ–‡ä»¶å†…å®¹ï¼Œæ‰€ä»¥ä¸è€ƒè™‘æœç´¢ç›®å½•ã€‚

```bash
$ find /tmp -type f -mtime -3 -name "*.sh"
```

## æ ¹æ®æ–‡ä»¶å¤§å°æœç´¢ï¼š-size

ä¾‹å¦‚æœç´¢/tmpä¸‹å¤§äº100Kçš„shæ–‡ä»¶

```bash
$ find /tmp -type f -size +100k -name '*.sh'
```

## æ ¹æ®æƒé™æœç´¢ï¼š-perm

ä¾‹å¦‚æœç´¢/tmpä¸‹æ‰€æœ‰è€…å…·æœ‰å¯è¯»å¯å†™å¯æ‰§è¡Œæƒé™çš„shæ–‡ä»¶ã€‚

```bash
find /tmp -type f -perm -0700 -name '*.sh'
```

## æœç´¢ç©ºæ–‡ä»¶

ç©ºæ–‡ä»¶å¯ä»¥æ˜¯æ²¡æœ‰ä»»ä½•å†…å®¹çš„æ™®é€šæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯æ²¡æœ‰ä»»ä½•å†…å®¹çš„ç›®å½•ã€‚

ä¾‹å¦‚æœç´¢ç›®å½•ä¸­æ²¡æœ‰æ–‡ä»¶çš„ç©ºç›®å½•ã€‚

```bash
$ find /tmp -type d -empty
```

## æœç´¢åˆ°æ–‡ä»¶åå¹¶åˆ é™¤

ä¾‹å¦‚æœç´¢åˆ°/tmpä¸‹çš„â€.tmpâ€æ–‡ä»¶ç„¶ååˆ é™¤ã€‚

```bash
$ find /tmp -type f -name "*.tmp" -exec rm -rf  '{}'  \;
```

## æœç´¢æŒ‡å®šæ—¥æœŸèŒƒå›´çš„æ–‡ä»¶

ä¾‹å¦‚æœç´¢/testä¸‹2021-06-03åˆ°2021-06-06ä¹‹é—´ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚

```bash
$ find /test -type f -newermt 2021-06-03 -a ! -newermt 2021-06-06
```

æˆ–è€…ï¼Œåˆ›å»ºä¸¤ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶ç”¨touchä¿®æ”¹è¿™ä¸¤ä¸ªæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼Œç„¶åfind -newerå»å‚ç…§è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚

```bash
$ touch -m -d 2017-06-03 tmp1.txt
$ touch -m -d 2017-06-06 tmp2.txt
$ find /test -type f -newer tmp1.txt -a ! -newer tmp2.txt
```

## å¹¶è¡ŒåŠ é€Ÿæœç´¢

æœ‰æ—¶å€™ï¼Œæƒ³è¦æœç´¢çš„å†…å®¹å¹¶ä¸çŸ¥é“åœ¨å“ªé‡Œï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šä»æ ¹â€/â€œå¼€å§‹æœç´¢ï¼Œè¿™æ ·çš„æœç´¢é€Ÿåº¦å¯èƒ½ä¼šç¨å¾®é•¿é‚£ä¹ˆä¸€ç‚¹ç‚¹ã€‚ä¸ºäº†åŠ é€Ÿæœç´¢ï¼Œä½¿ç”¨xargsçš„å¹¶è¡ŒåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæœç´¢â€/â€œä¸‹çš„æ‰€æœ‰â€Find.pmâ€ç»“å°¾çš„æ–‡ä»¶ï¼š

```bash
ls --hide proc / | xargs -i -P 0 find /{} -type f -name "*Find.pm"
```

## è·å–æ–‡ä»¶ç»å¯¹è·¯å¾„

å½“findç»“åˆç®¡é“ï¼Œè€Œç®¡é“åçš„å‘½ä»¤å¾ˆå¯èƒ½æƒ³è¦è·å–åˆ°æœç´¢åˆ°çš„æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œæˆ–è€…è¯´æ˜¯å…¨è·¯å¾„ã€‚è€Œé—®é¢˜æ˜¯ï¼Œå½“findçš„æœç´¢è·¯å¾„æ˜¯ç›¸å¯¹è·¯å¾„æ—¶ï¼Œæœç´¢å‡ºæ¥çš„æ˜¾ç¤ºç»“æœä¹Ÿæ˜¯ä»¥ç›¸å¯¹è·¯å¾„æ˜¾ç¤ºçš„ã€‚

```bash
$ mkdir /tmp/test
$ touch /tmp/test/{a,b,c}.png
$ find .
.
./a.png
./b.png
./c.png
```

æƒ³è¦è·å–å…¨è·¯å¾„ï¼Œæ–¹å¼æœ‰å¾ˆå¤šç§ï¼š

```bash
# æœç´¢å‰å…ˆpwd

$ find $(pwd)
/tmp/test
/tmp/test/a.png
/tmp/test/b.png
/tmp/test/c.png

# æˆ–ä½¿ç”¨$PWDç¯å¢ƒå˜é‡
$ find $PWD
/tmp/test
/tmp/test/a.png
/tmp/test/b.png
/tmp/test/c.png

# ä½¿ç”¨bashçš„æ³¢æµªå·æ‰©å±• `~+`
$ find ~+
/tmp/test
/tmp/test/a.png
/tmp/test/b.png
/tmp/test/c.png
```

## è·å–æ–‡ä»¶åéƒ¨åˆ†(basename)

findçš„-printfé€‰é¡¹æœ‰å¾ˆå¤šä¿®é¥°ç¬¦åŠŸèƒ½ï¼Œå¯¹äºå¤„ç†è·¯å¾„æ–¹é¢çš„ä¿®é¥°ç¬¦æœ‰%fã€%pã€%Pï¼Œå…¶ä¸­%fæ˜¯è·å–basenameï¼ˆå»é™¤æ‰€æœ‰è·¯å¾„å‰ç¼€ï¼‰ï¼Œ%pæ˜¯è·å–è·¯å¾„è‡ªèº«ï¼Œä¸€èˆ¬ç”¨ä¸ä¸Šï¼Œ%Pæ˜¯è·å–é™¤äº†findæœç´¢è·¯å¾„çš„å‰©ä½™éƒ¨åˆ†ã€‚

é¦–å…ˆï¼Œæƒ³è¦è·å–basenameï¼Œå»ºè®®ä½¿ç”¨%fã€‚

```bash
$ mkdir /tmp/test/test1
$ touch /tmp/test/test1/{x,y,z}.png
$ find /tmp/test -printf "%f\n"
test
a.png
b.png
c.png
test1
x.png
y.png
z.png
```

å†çœ‹ä½¿ç”¨%Pçš„æ•ˆæœã€‚ç»“æœä»…ä»…æ˜¯å»æ‰äº†findæœç´¢è·¯å¾„/tmp/testéƒ¨åˆ†ã€‚å½“æœç´¢è·¯å¾„åªæœ‰ä¸€å±‚(å³æ²¡æœ‰å­ç›®å½•)æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨æ¥è·å–basenameã€‚

```bash
$ find /tmp/test -printf "%P\n"

a.png
b.png
c.png
test1
test1/x.png
test1/y.png
test1/z.png
```

## ä»ç»“æœä¸­æ’é™¤ç›®å½•è‡ªèº«

findæœç´¢ç›®å½•æ—¶ï¼Œæ€»æ˜¯ä¼šå°†æœç´¢è·¯å¾„è‡ªèº«ä¹ŸåŒ…å«åˆ°æœç´¢ç»“æœä¸­ã€‚æƒ³åŠæ³•æ’é™¤å®ƒæ˜¯å¿…é¡»çš„ã€‚

æ’é™¤çš„æ–¹æ³•æ˜¯ï¼ŒåŠ ä¸Šä¸€ä¸ª-pathé€‰é¡¹å¹¶å–åï¼Œ-pathçš„å‚æ•°å’Œfindçš„æœç´¢è·¯å¾„å‚æ•°å¿…é¡»ä¸€è‡´ã€‚

```bash
$ find /tmp/test ! -path /tmp/test
/tmp/test/a.png
/tmp/test/b.png
/tmp/test/c.png
/tmp/test/test1
/tmp/test/test1/x.png
/tmp/test/test1/y.png
/tmp/test/test1/z.png

$ find . ! -path .
./a.png
./b.png
./c.png
./test1
./test1/x.png
./test1/y.png
./test1/z.png
```
